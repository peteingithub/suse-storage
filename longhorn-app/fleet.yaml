defaultNamespace: longhorn-system

# This ensures Fleet installs the 'longhorn-crd' bundle first
dependsOn:
  - name: suse-storage-longhorn-crd 

helm:
  repo: https://charts.rancher.io
  chart: longhorn
  version: 108.2.1+up1.10.2
  releaseName: longhorn
  
  values:
    global:
      cattle:
        systemDefaultRegistry: registry.rancher.com
    persistence:
      defaultClassReplicaCount: 1
    csi:
      attacherReplicaCount: 1
      provisionerReplicaCount: 1
      resizerReplicaCount: 1
      snapshotterReplicaCount: 1
    longhornUI:
      replicas: 1

diff:
  comparePatches:
  - apiVersion: apiextensions.k8s.io/v1
    kind: CustomResourceDefinition
    name: engineimages.longhorn.io
    operations:
    - {"op": "replace", "path": "/status"}
  - apiVersion: apiextensions.k8s.io/v1
    kind: CustomResourceDefinition
    name: nodes.longhorn.io
    operations:
    - {"op": "replace", "path": "/status"}
  - apiVersion: apiextensions.k8s.io/v1
    kind: CustomResourceDefinition
    name: volumes.longhorn.io
    operations:
    - {"op": "replace", "path": "/status"}
